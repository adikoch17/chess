(this.webpackJsonpchess=this.webpackJsonpchess||[]).push([[0],{48:function(e,t,n){},49:function(e,t,n){},50:function(e,t,n){},52:function(e,t,n){},53:function(e,t,n){},54:function(e,t,n){},55:function(e,t,n){},86:function(e,t,n){"use strict";n.r(t);var o=n(1),s=n.n(o),c=n(36),i=n.n(c),r=(n(48),n(2)),a=(n(49),n(37)),j=n(38),u=n(43),d=n(41),h=n(39),l=n.n(h),m=n(19),b=n.n(m),O=(n(50),n(0)),f=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var o;return Object(a.a)(this,n),(o=t.call(this,e)).onDrop=function(e){var t=e.sourceSquare,n=e.targetSquare;o.props.socket.emit("move",[{sourceSquare:t,targetSquare:n},{room:o.state.room}])},o.resetGame=function(){o.props.socket.emit("reset",o.state.room)},o.setOrientation=function(e){return e?"white":"black"},o.checkWidth=function(e,t){o.state.width>=560&&e<560&&o.setState({width:300}),o.state.width<560&&e>560&&o.setState({width:560})},o.showWinner=function(){if("true"===o.state.gameOver)return console.log("you won"),Object(O.jsx)("div",{id:"winnerModal",children:Object(O.jsxs)("div",{id:"winnerCont",children:[Object(O.jsxs)("h1",{children:[o.state.winner," has won!"]}),Object(O.jsx)("button",{id:"newGame",onClick:o.resetGame,children:"new game"})]})})},o.state={fen:"start",myturn:!0,isWhite:!1,room:o.props.roomid,width:560,winner:"",gameOver:"false"},o}return Object(j.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.game=new b.a,this.setState({isWhite:this.props.isCreator,myturn:this.props.isCreator}),this.props.getColor(this.state.isCreator),this.props.socket.on("reset-from-server",(function(t){"reset"===t&&(e.game=new b.a,e.setState({fen:e.game.fen()}),e.setState({myturn:e.state.isWhite}),e.setState({winner:""}),e.setState({myturn:!1,gameOver:"false"}))})),this.props.socket.on("move-from-server",(function(t){console.log(t);var n=t.sourceSquare,o=t.targetSquare,s=e.game.move({from:n,to:o,promotion:"q"});console.log(s),null!==s&&e.setState({myturn:!e.state.myturn}),e.game.game_over()&&(console.log("checkmate",s.color),"w"===s.color?e.setState({winner:"White"}):"b"===s.color&&e.setState({winner:"Black"}),e.setState({myturn:!1,gameOver:"true"})),null!==s&&e.setState({fen:e.game.fen()})}))}},{key:"render",value:function(){var e=this;return Object(O.jsxs)("div",{children:[Object(O.jsx)(l.a,{position:this.state.fen,transitionDuration:0,onDrop:this.onDrop,draggable:this.state.myturn,orientation:this.setOrientation(this.state.isWhite),calcWidth:function(t){var n=t.screenWidth,o=t.screenHeight;e.checkWidth(n,o)},width:this.state.width}),Object(O.jsx)("button",{onClick:this.resetGame,children:"reset"}),this.showWinner()]})}}]),n}(s.a.Component),p=n(88),v=(n(52),function(e){var t=e.changeRoute,n=e.isCreator,s=e.enterRoom,c=e.socket,i=Object(o.useState)(""),a=Object(r.a)(i,2),j=a[0],u=a[1];Object(o.useEffect)((function(){n&&u(Object(p.a)())}),[]);var d=function(e){var t=e.target.value;u(t)};return Object(O.jsxs)("div",{id:"join",children:[function(e){return e?Object(O.jsxs)("div",{id:"code",children:["share this code with your friend ",Object(O.jsx)("br",{})," ",Object(O.jsx)("b",{children:j})]}):Object(O.jsx)("div",{children:Object(O.jsx)("input",{type:"text",id:"roomId",onChange:d})})}(n),Object(O.jsx)("button",{onClick:function(){c.emit("room",j),s(j),t("game")},id:"joinbtn",children:"Join"})]})}),g=n(42),x=function(e){var t=e.message;return Object(O.jsx)("div",{children:Object(O.jsxs)("p",{children:[Object(O.jsxs)("b",{children:[t.color," :"]})," ",Object(O.jsxs)("span",{style:{fontWeight:"300"},children:[t.data," ",Object(O.jsxs)("span",{style:{opacity:.2},children:["(",t.timestamp,")"]})]})]})})},k=(n(53),function(e){var t=e.socket,n=e.color,s=e.roomid,c=Object(o.useState)(""),i=Object(r.a)(c,2),a=i[0],j=i[1],u=Object(o.useState)([]),d=Object(r.a)(u,2),h=d[0],l=d[1];Object(o.useEffect)((function(){t.on("message-from-server",(function(e){console.log(e,"socket");var t=h;t.push(e),l(Object(g.a)(t)),console.log(h)}))}),[]);return Object(O.jsxs)("div",{id:"chatComp",children:[Object(O.jsxs)("div",{id:"messagesCont",children:[Object(O.jsx)("div",{id:"headingChat",children:Object(O.jsx)("h1",{children:"Chat"})}),Object(O.jsx)("div",{id:"messages",children:h.map((function(e,t){return Object(O.jsx)(x,{message:e},t)}))})]}),Object(O.jsx)("div",{id:"form",children:Object(O.jsxs)("form",{children:[Object(O.jsx)("input",{type:"text",onChange:function(e){var t=e.target.value;j(t),console.log(a)},id:"inpField"}),Object(O.jsx)("button",{onClick:function(e){document.getElementById("inpField").value="",13==e.keyCode&&e.preventDefault(),e.preventDefault();var o=(new Date).toLocaleTimeString();t.emit("message",{room:s,message:{color:n,data:a,timestamp:o}}),console.log("click")},className:"primary",children:"SEND"})]})})]})}),w=(n(54),function(e){var t=e.isCreator,n=e.socket,s=Object(o.useState)("join"),c=Object(r.a)(s,2),i=c[0],a=c[1],j=Object(o.useState)(""),u=Object(r.a)(j,2),d=u[0],h=u[1],l=Object(o.useState)(""),m=Object(r.a)(l,2),b=m[0],p=m[1];Object(o.useEffect)((function(){""===b&&p(t?"white":"black")}),[]);return"join"===i?Object(O.jsx)("div",{children:Object(O.jsx)(v,{changeRoute:function(e){a(e)},isCreator:t,enterRoom:function(e){h(e)},socket:n})}):"game"===i?Object(O.jsxs)("div",{id:"gameCont",children:[Object(O.jsx)(f,{isCreator:t,socket:n,roomid:d,getColor:function(e){!0===e?p("white"):!1===e&&p("black")}}),Object(O.jsx)(k,{socket:n,color:b,roomid:d})]}):void 0}),C=(n(55),function(e){var t=e.setCreator,n=e.changeRoute;return Object(O.jsxs)("div",{id:"coj",children:[Object(O.jsx)("button",{onClick:function(){t(!0),n("game")},className:"primary",children:"create game"}),Object(O.jsx)("button",{onClick:function(){t(!1),n("game")},className:"secondary",children:"join game"})]})}),S=n(40),y=n.n(S).a.connect("https://chessreact-server.herokuapp.com",{withCredentials:!0}),W=function(){var e=Object(o.useState)("land"),t=Object(r.a)(e,2),n=t[0],s=t[1],c=Object(o.useState)(!1),i=Object(r.a)(c,2),a=i[0],j=i[1];return"land"===n?Object(O.jsx)("div",{className:"App",children:Object(O.jsx)(C,{setCreator:function(e){j(e)},changeRoute:function(e){s(e)}})}):"game"===n?Object(O.jsx)("div",{className:"App",children:Object(O.jsx)(w,{isCreator:a,socket:y})}):Object(O.jsx)("div",{className:"App",children:Object(O.jsx)("h2",{children:"Oops an error occurred"})})};i.a.render(Object(O.jsx)(s.a.StrictMode,{children:Object(O.jsx)(W,{})}),document.getElementById("root"))}},[[86,1,2]]]);
//# sourceMappingURL=main.554917bf.chunk.js.map